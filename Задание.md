# WarDiary AI  
## «Искусство через призму военных лет»

**Кейс № 3 хакатона** — web-приложение для генерации художественных произведений (тексты, иллюстрации, музыка) на основе дневниковых фрагментов участников войны с сохранением их эмоциональной насыщенности.

---

## 🚀 Возможности

1. **Эмоциональный анализ**  
   — NLP-аннотация входного фрагмента: распознаются ключевые эмоции (радость, печаль, гнев, страх, нейтральность) с метриками (percent, fraction, label) и выделяется доминантная эмоция.  

2. **Генерация художественного текста**  
   — на базе результатов анализа создаётся литературный рассказ, сохраняющий факты дневника и усиливающий эмоциональный фон.

3. **Генерация иллюстраций**  
   — по описанию из дневника или на основе эмоционального профиля строится галерея картинок (DALL·E 2 / Stable Diffusion).

4. **Генерация музыки**  
   — текст-в-музыку (Suno API / AudioLDM): «меланхоличная мелодия», «торжественный марш» и т. п., с аудиоплеером в интерфейсе.

5. **Обратная связь**  
   — кнопки «Мне нравится / не нравится» для каждой генерации.

6. **Этические фильтры**  
   — проверка входного и выходного контента на отсутствие призывов к ненависти, агрессии и недопустимого контента.

---

## 📐 Архитектура

```

┌──────────┐       ┌──────────┐       ┌───────────────┐
│  Front-  │  ↔    │  FastAPI │  ↔    │   LLM / APIs  │
│   end    │       │  Backend │       │ (Ollama, Suno)│
└──────────┘       └──────────┘       └───────────────┘
React              Python              AI-модели

````

- **Frontend**: React (Create React App), компоненты чата, режимы «анализ», «текст», «картинка», «музыка», сохранение истории DiSC.  
- **Backend**: FastAPI + SQLAlchemy + SQLite/Postgres, REST-роуты `/api/emotion`, `/api/text`, `/api/image`, `/api/music`, `/api/story`.  
- **LLM**: локальный Ollama (`qwen3:14b`), внешние API для музыки (Suno или AudioLDM).  

---

## ⚙️ Технологии

- **Ядро**: Python 3.10+, FastAPI, SQLAlchemy  
- **LLM-движок**: Ollama (`qwen3`), Prompt-инжиниринг  
- **REST-клиенты**: requests, urllib3  
- **Frontend**: React, hooks, CSS-переменные для темы  
- **НХР**: Suno API / AudioLDM для генерации аудио  
- **Хранение**: SQLite (по умолчанию) или PostgreSQL  
- **Утилиты**: python-dotenv, uvicorn, nodemon (frontend)  

---

## 📦 Установка и запуск

### 1. Клонировать репозиторий

```bash
git clone https://…/wardiary-ai.git
cd wardiary-ai
````

### 2. Backend

```bash
# Python-окружение
python -m venv .venv && source .venv/bin/activate
pip install -r requirements.txt

# Настроить .env (скопировать пример и заполнить)
cp backend/.env.example backend/.env
# Указать DATABASE_URL, OLLAMA_HOST, GIGACHAT_* или SUNO_API_KEY

# Запустить
uvicorn backend.main:app --reload
```

### 3. Запустить Ollama

```bash
# если не работает авто-старт
ollama serve
```

### 4. Frontend

```bash
cd frontend
npm install
npm start
```

По умолчанию UI доступен на [http://localhost:3000](http://localhost:3000), API — на [http://localhost:8000/api](http://localhost:8000/api).

---

## 🚪 Использование

1. **Регистрация** — ввести имя (генерируется UUID).
2. **Новый чат** — кнопка «＋ New chat».
3. **Режимы** — выбрать «анализ» (emotion) или «текст»/«картинка»/«музыка».
4. **Ввод** — вставить фрагмент дневника.
5. **Генерация** — получить ответ и оценить «лайк/дизлайк».
6. **История** — сохраняется локально и на сервере, можно листать чаты и сообщения.

---

## ♻️ Дальнейшие улучшения

* **RAG (дополнение фактами)** через исторические базы.
* **Модерация** выходного контента.
* **Мульти-язычность** (английский, немецкий).
* **Расширение набора эмоций** и тонального анализа.

---
